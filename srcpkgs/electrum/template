# Template file for 'electrum'
pkgname=electrum
version=4.6.2
revision=1
build_style=python3-module
hostmakedepends="python3-setuptools python3-pyqt6-devel-tools"
depends="python3-aiohttp python3-aiohttp_socks python3-aiorpcx
 python3-dnspython python3-ecdsa python3-jsonrpclib python3-Pillow
 python3-protobuf python3-pyaes python3-pycryptodomex python3-pyqt6
 python3-qrcode python3-socks python3-cryptography libsecp256k1
 python3-async-timeout python3-certifi python3-jsonpatch libzbar
 python3-pyqt6-declarative python3-pyqt6-gui python3-pyqt6-network
 python3-attrs electrum-ecc electrum-aionostr"
# Optional dependencies:
#  btchip - BTChip hardware wallet support
#  trezor - TREZOR hardware wallet support
#  keepkey - KeepKey hardware wallet support
#  qdarkstyle - Dark theme
checkdepends="$depends python3-pytest"
short_desc="Lightweight Bitcoin wallet"
maintainer="Arjan Mossel <arjanmossel@gmail.com>"
license="MIT"
homepage="https://electrum.org/"
changelog="https://raw.githubusercontent.com/spesmilo/electrum/master/RELEASE-NOTES"
distfiles="https://github.com/spesmilo/electrum/archive/${version}.tar.gz"
checksum=a51e091e993ebaaa3f9952531c9a8c9a07b6a4e6ea21833a4b7e644dc01ce4be

post_extract() {
	# qdarkstyle is not packaged
	vsed -i '/^qdarkstyle/d' contrib/requirements/requirements.txt
}

post_install() {
	vsed -i -e 's|electrum %u|electrum|' \
		-e 's|testnet %u|testnet|' \
		${DESTDIR}/usr/share/applications/electrum.desktop
	vlicense LICENCE
	vdoc "${FILESDIR}/README.voidlinux"
}
